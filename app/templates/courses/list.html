{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="h4">Courses</h1>
  <a class="btn btn-sm btn-primary" href="{{ url_for('courses.create_course') }}"><i class="fa fa-plus"></i> New</a>
</div>
<table class="table table-sm table-striped">
  <thead><tr><th>Name</th><th>Semester</th><th>Year</th><th></th></tr></thead>
  <tbody>
  {% for c in courses %}
  <div class="card mb-2">
    <div class="card-body d-flex justify-content-between align-items-center">
      <div>
        <div class="fw-semibold">{{ c.name }}</div>
        {% if c.year %}<div class="small text-muted">Year {{ c.year }}</div>{% endif %}
      </div>
      <div class="d-flex gap-2">
          <a class="btn btn-outline-primary"
   href="{{ url_for('attendance.course_attendance', course_id=c.id) }}">
  <i class="fa-solid fa-user-check me-1"></i>Attendance
</a>
        <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('courses.enroll', course_id=c.id) }}">Enroll</a>
  <a class="btn btn-sm btn-outline-primary" href="{{ url_for('courses.students_in_course', course_id=c.id) }}">Roster</a>
  <a class="btn btn-outline-secondary"
   href="{{ url_for('seating.seating_view', course_id=c.id) }}">
  Seating plan
</a>

        {% set has_lessons = c.lessons is defined and (c.lessons|length > 0) %}
        {% if not has_lessons %}
          <a class="btn btn-sm btn-primary"
             href="{{ url_for('schedule.schedule_setup', course_id=c.id) }}">
            <i class="fa-solid fa-calendar-plus me-1"></i> Set up schedule
          </a>
        {% else %}
          <a class="btn btn-sm btn-outline-primary"
             href="{{ url_for('schedule.course_schedule', course_id=c.id) }}">
            <i class="fa-solid fa-calendar-days me-1"></i> View schedule
          </a>
        {% endif %}
      </div>
    </div>
  </div>
{% endfor %}
  </tbody>
</table>
{% endblock %}
