{% extends "base.html" %}

{% block title %}Attendance Calendar{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h2">Attendance</h1>
    <!-- Month navigation will go here -->
</div>

<div class="card">
    <div class="card-body">
        <div class="row text-center">
            <!-- Calendar header -->
            <div class="col fw-bold">Sun</div>
            <div class="col fw-bold">Mon</div>
            <div class="col fw-bold">Tue</div>
            <div class="col fw-bold">Wed</div>
            <div class="col fw-bold">Thu</div>
            <div class="col fw-bold">Fri</div>
            <div class="col fw-bold">Sat</div>
        </div>
        <div class="row row-cols-7 g-1">
            <!-- Calendar days will be rendered here by the backend -->
            {% for day in calendar_data %}
                <div class="col border rounded p-2" style="height: 8rem;">
                    <div class="fw-bold {% if not day.in_month %} text-muted {% endif %}">{{ day.date.day }}</div>
                    {% if day.lesson %}
                        <a href="#"
                           hx-get="/attendance/lesson/{{ day.lesson.id }}"
                           hx-target="#attendance-sheet"
                           hx-swap="innerHTML"
                           class="d-block btn btn-sm btn-primary mt-1 text-truncate"
                        >
                            {{ day.lesson.course.name }}
                        </a>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    </div>
</div>

<div id="attendance-sheet" class="mt-4">
    <!-- The attendance sheet for the selected lesson will be loaded here -->
</div>
{% endblock %}
